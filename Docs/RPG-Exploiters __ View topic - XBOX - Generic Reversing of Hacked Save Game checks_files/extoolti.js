
if(!Curse)
{var Curse={};}
Curse.Browser={ie:navigator.appName.indexOf("Microsoft")!=-1,ie7:this.ie&&navigator.appVersion.indexOf("MSIE 7")!=-1,ie6:this.ie&&navigator.appVersion.indexOf("MSIE 6")!=-1,opera:!!window.opera,safari:navigator.userAgent.indexOf("Safari")!=-1,gecko:navigator.userAgent.indexOf("Gecko")!=-1&&navigator.userAgent.indexOf("KHTML")==-1};Curse.Client={viewportWidth:function(){return self.innerWidth||(document.documentElement.clientWidth||document.body.clientWidth);},viewportHeight:function(){return self.innerHeight||(document.documentElement.clientHeight||document.body.clientHeight);},viewportSize:function(){return{width:this.viewportWidth(),height:this.viewportHeight()};},scrollTop:function()
{if(self.pageYOffset)
{return self.pageYOffset;}
else if(document.documentElement&&!document.documentElement.scrollTop)
{return 0;}
else if(document.documentElement&&document.documentElement.scrollTop)
{return document.documentElement.scrollTop;}
else if(document.body&&document.body.scrollTop)
{return document.body.scrollTop;}}};function cg_args(a){var r=[];for(var i=0,len=a.length;i<len;++i){r.push(a[i]);}
return r;}
if(!Array.indexOf){Array.prototype.indexOf=function(obj){for(var i=0;i<this.length;i++){if(this[i]==obj){return i;}}}}
if(!Curse.Browser.ie)
{HTMLElement.prototype.contains=function(oEl){if(oEl==this)return true;if(oEl==null)return false;return this.contains(oEl.parentNode);};}
Function.prototype.bindAsEventListener=function(object){var __method=this;return function(event){return __method.call(object,event||window.event);}}
Function.prototype.bind=function()
{var ref=this;var args=cg_args(arguments);var object=args.shift();return function()
{return ref.apply(object,args.concat(cg_args(arguments)));};};function cg_iterateArray(arr,func,ud)
{var res;for(var i=0,len=arr.length;i<len;++i)
{res=func(arr[i],ud,arr,i);if(res!=null)
{arr[i]=res;}}}
function cg_inArray(a,r,f,s){if(a==null){return-1;}
if(f){return cg_inArrayF(a,r,f);}
for(var i=s||0,len=a.length;i<len;++i){if(a[i]==r){return i;}}
return-1;}
function cg_inArrayF(a,r,f,s){for(var i=s||0,len=a.length;i<len;++i){if(f(a[i])==r){return i;}}
return-1;}
function cg_strcmp(a,b){if(a==b){return 0;}
if(a==null){return-1;}
if(b==null){return 1;}
return a<b?-1:1;}
function cg_cOr(a,b){for(var p in b){if(typeof b[p]=="object"){if(!a[p]){a[p]={};}
cg_cOr(a[p],b[p]);}
else
{a[p]=b[p];}}}
function cg_ce(a,b){var r=document.createElement(a);if(b)
{cg_cOr(r,b);}
return r;}
function cg_ae(a,b){return a.appendChild(b);}
function cg_ge(a)
{return document.getElementById(a);}
function cg_de(a)
{a.parentNode.removeChild(a);}
function cg_ia(parent,node,referenceNode){parent.insertBefore(node,referenceNode.nextSibling);}
function cg_gebt(a,b){return a.getElementsByTagName(b);}
function cg_ct(a){return document.createTextNode(a);}
function cg_rf()
{return false;}
function cg_df(){this.blur();}
function cg_ds(a){a.onmousedown=cg_rf;a.onselectstart=cg_rf;if(Curse.Browser.ie){a.onfocus=cg_df;}}
function cg_cO(a,b){for(var p in b){a[p]=b[p];}}
function cg_getShadowText(text,className)
{var shadowText=cg_ce("span");for(var i=-1;i<=1;++i)
{for(var j=-1;j<=1;++j)
{var d=cg_ce("div");d.style.position="absolute";d.style.whiteSpace="nowrap";d.style.left=i+"px";d.style.top=j+"px";if(i==0&&j==0)
{d.style.zIndex=4;}
else
{d.style.color="black";d.style.zIndex=2;}
cg_ae(d,cg_ct(text));cg_ae(shadowText,d);}}
shadowText.style.position="relative";shadowText.className="glow"+(className!=null?" "+className:"");var s=cg_ce("span");s.style.visibility="hidden";cg_ae(s,cg_ct(text));cg_ae(shadowText,s);return shadowText;}
function cg_getLookupsFromCookie(name,delim1,delim2)
{var lookupList=[];var cookieList=cg_getCookie("Login."+name);if(!delim1)
{delim1=",";}
if(!delim2)
{delim2="^";}
if(cookieList)
{cookieList=cookieList.split(delim1);for(var i=0;i<cookieList.length;i++)
{lookupList.push(cookieList[i].split(delim2));}}
return lookupList;}
function cg_getLookupSelectBox(lookupName,selectName,container,hideEmpty,onchange,fromCookie,delim1,delim2,emptyLabel)
{if(fromCookie)
{var lookupList=cg_getLookupsFromCookie(lookupName,delim1,delim2);}
else
{var lookupList=Curse.Lookup[lookupName]}
var objSelect=document.createElement("select");if(selectName)
{objSelect.name=selectName;objSelect.id="fi_"+selectName;}
if(onchange)
{objSelect.onchange=function(){eval(onchange);};}
if(!hideEmpty)
{var objOption=document.createElement("option");if(!emptyLabel)
{emptyLabel="";}
objOption.text=emptyLabel;objOption.value="";objSelect.options.add(objOption)}
if(!fromCookie)
{for(var p in lookupList)
{if(typeof p=='string'&&p!="indexOf")
{var objOption=document.createElement("option");objOption.text=lookupList[p].replace("<br>"," - ");objOption.value=p;objSelect.options.add(objOption)}}}
else
{for(var i=0;i<lookupList.length;i++)
{var objOption=document.createElement("option");objOption.text=lookupList[i][1].replace("<br>"," - ");objOption.value=lookupList[i][0];objSelect.options.add(objOption)}}
if(container)
{container.appendChild(objSelect);return objSelect}
else
{return objSelect;}}
function cg_scrollTo(element,padding)
{var pos=cg_getPosition(element)
scrollTo(0,pos.y-padding);}
function cg_scrollTop()
{if(self.pageYOffset)
{return self.pageYOffset;}
else if(document.documentElement&&!document.documentElement.scrollTop)
{return 0;}
else if(document.documentElement&&document.documentElement.scrollTop)
{return document.documentElement.scrollTop;}
else if(document.body&&document.body.scrollTop)
{return document.body.scrollTop;}}
function cg_addEventListener(eventSource,eventName,eventHandler)
{if(eventSource.addEventListener){eventSource.addEventListener(eventName,eventHandler,false);}
else if(eventSource.attachEvent){eventName="on"+eventName;eventSource.attachEvent(eventName,eventHandler);}}
function cg_removeEventListener(eventSource,eventName)
{if(eventSource.addEventListener){eventSource.removeEventListener(eventName,addUserLocation,false);}
else if(eventSource.detachEvent)
{eventSource.detachEvent("on"+eventName);}}
function cg_hasClass(pElem,pClassName)
{if(!pElem.className)
{return;}
if(pElem.className==pClassName)
{return true;}
if(pElem.className.split(" ").indexOf(pClassName)>=0)
{return true;}
return false;}
function cg_removeClass(pElem,pClassName)
{if(!pElem.className)
{return;}
var classArray=pElem.className.split(" ");for(var i=0;i<classArray.length;i++)
{if(classArray[i]==pClassName)
{classArray.splice(i,1);break;}}
pElem.className=classArray.join(" ");}
function cg_addClass(pElem,pClassName)
{var classArray=pElem.className.split(" ");for(var i=0;i<classArray.length;i++)
{if(classArray[i]==pClassName)
{return;}}
classArray.push(pClassName);pElem.className=classArray.join(" ");}
function cg_isArray(obj){if(obj.constructor.toString().toLowerCase().indexOf("function")==-1&&obj.constructor.toString().toLowerCase().indexOf("array")==-1)
{return false;}
else
{if(!obj.length)
{return false;}
return true;}}
function cg_getPosition(pElem)
{var left=0;var top=0;while(pElem.offsetParent){left+=pElem.offsetLeft;if(pElem.clientLeft)
{left+=pElem.clientLeft;}
top+=pElem.offsetTop;if(pElem.clientTop)
{top+=pElem.clientTop;}
pElem=pElem.offsetParent;}
left+=pElem.offsetLeft;top+=pElem.offsetTop;return{x:left,y:top};}
function cg_getScroll(){var x=0,y=0;if(typeof(window.pageYOffset)=="number")
{x=window.pageXOffset;y=window.pageYOffset;}
else
{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){x=document.body.scrollLeft;y=document.body.scrollTop;}
else
{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop))
{x=document.documentElement.scrollLeft;y=document.documentElement.scrollTop;}}}
return{x:x,y:y};}
function cg_setTextNodes(n,b)
{if(a.nodeType==3)
{a.nodeValue=b;}
else
{for(var i=0;i<a.childNodes.length;++i){cg_setTextNodes(a.childNodes[i],b);}}}
function cg_deleteCookie(name,path,domain)
{if(cg_getCookie(name))
{document.cookie=name+"="+((path)?";path="+path:"")+((domain)?";domain="+domain:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT";}}
function cg_setCookie(name,value,exp_y,exp_m,exp_d,path,domain,secure)
{var cookie_string=name+"="+escape(value);var expires=new Date();if(exp_y)
{if(exp_m=null)
{exp_m=1;}
if(exp_d=null)
{exp_m=1;}
expires.setTime(expires.getTime()+(1000*60*60*24*31));}
else
{expires.setDate(expires.getDate()+365);}
cookie_string+="; expires="+expires.toGMTString();if(path)
cookie_string+="; path="+escape(path);if(domain)
cookie_string+="; domain="+escape(domain);if(secure)
cookie_string+="; secure";document.cookie=cookie_string;}
function cg_getCookie(cookie_name)
{var results=document.cookie.match(cookie_name+'=(.*?)(;|$)');if(results)
return(unescape(results[1]));else
return null;}
function cg_getElementsByClassName(sClassName,sTag,oContainer,returnFirst){var searchObj;var results=new Array();if(!oContainer){oContainer=document;}
if(sTag=="*"||!sTag){if(document.all){searchObj=oContainer.all;}
else{searchObj=oContainer.getElementsByTagName("*");}}
else
{searchObj=oContainer.getElementsByTagName(sTag);}
for(var i=0,el;((searchObj.all&&!neo.bw.isIE6up)?el=searchObj(i):el=searchObj.item(i));i++){if(el.className==sClassName){if(returnFirst)
{return el;}
results.push(el);}}
return results;}
function cg_getQueryStringParam(param){var begin,end;if(self.location.search.length>1)
{begin=self.location.search.indexOf(param)
if(begin==-1)
{return"";}
begin=begin+param.length+1;end=self.location.search.indexOf("&",begin);if(end==(-1))end=self.location.search.length;return(self.location.search.substring(begin,end));}
else if(self.location.hash.length>1)
{begin=self.location.hash.indexOf(param)+param.length+1;end=self.location.hash.indexOf("&",begin);if(end==(-1))end=self.location.hash.length;return(self.location.hash.substring(begin,end));}
else return("");}
function cg_addEventListener(eventSource,eventName,eventHandler)
{if(eventSource.addEventListener){eventSource.addEventListener(eventName,eventHandler,false);}
else if(eventSource.attachEvent){eventName="on"+eventName;eventSource.attachEvent(eventName,eventHandler);}}
function cg_removeEventListener(eventSource,eventName)
{if(eventSource.addEventListener){eventSource.removeEventListener(eventName,addUserLocation,false);}
else if(eventSource.detachEvent)
{eventSource.detachEvent("on"+eventName);}}
function cg_getEvent(e){if(!Curse.Browser.ie&&!e)
{return null;}
if(!e)
{e=window.event;if(!e)
{return null;}}
e._button=e.which?e.which:e.button;e._target=e.target?e.target:e.srcElement;e._relatedTarget=e.relatedTarget?e.relatedTarget:e.toElement;return e;}
function cg_getEventTarget(e){e=cg_getEvent(e);if(!e)
{return null;}
return e._target;}
function cg_formatNumber(num)
{num=""+parseInt(num);if(num.length<=3)
{return num;}
return cg_formatNumber(num.substr(0,num.length-3))+","+num.substr(num.length-3);}
function cg_getTextValue(a)
{if(Curse.Browser.ie)
{return a.innerText;}
else
{return a.textContent;}}
function cg_toggleDisplay(a)
{if(a.style.display=="none")
{a.style.display="";return true;}
else
{a.style.display="none";return false;}}
function cg_cancelBubbling(e)
{if(Curse.Browser.ie){e=window.event;e.cancelBubble=true;}
else
{e.stopPropagation();}}
var cg_localTime;function cg_refreshDate()
{cg_localTime=new Date().getTime();}
cg_refreshDate();function mod(divisee,base)
{return Math.round(divisee-(Math.floor(divisee/base)*base));}
function cg_getLocalDateFromTime(time)
{return time;}
function cg_getShortFriendlyTime(epoch)
{localDate=new Date(epoch);function getPlural(value,ifSingular,ifPlural)
{if(value==1)
{return ifSingular;}
return ifPlural;}
var shortFriendlyTime;var timeDifferenceMinutes=parseInt((cg_localTime-localDate.getTime())/1000/60);var timeDifferenceHours=parseInt(timeDifferenceMinutes/60);if(timeDifferenceMinutes<=1)
{return Localization.time_last_minute;}
if(timeDifferenceHours<1)
{return Localization.replace("time_minute",timeDifferenceMinutes);}
if(timeDifferenceHours<24)
{var extraMins=mod(timeDifferenceMinutes,60);shortFriendlyTime=parseInt(timeDifferenceHours,null)+" hr";if(extraMins>0)
{return Localization.replace("time_hour_minute",timeDifferenceHours,extraMins);}
else
{return Localization.replace("time_hour",timeDifferenceHours);}}
var timeDifferenceDays=parseInt(timeDifferenceHours/24);if(timeDifferenceDays<7)
{var extraHours=mod(timeDifferenceHours,24);if(timeDifferenceDays>0)
{return Localization.replace("time_days_hour",timeDifferenceDays,extraHours);}
else
{return Localization.replace("time_day_hour",timeDifferenceDays,extraHours);}}
return Localization.replace("time_full",localDate.getMonth()+1,localDate.getDate(),localDate.getFullYear(),localDate.toLocaleTimeString());}
function cg_trim(a)
{return a.replace(/^\s+/,'').replace(/\s+$/,'');}
function cg_addOrReplace(a,b,c)
{if(b)
{cg_de(b);}
cg_ae(a,c);}
function cg_dbg(text)
{if(!cg_ge("debugPanel"))
{return;}
if(cg_ge("debugPanel").style.display=="none")
{return;}
cg_ge("debugPanel").appendChild(document.createElement("br"));cg_ge("debugPanel").appendChild(document.createTextNode(text));}
function cg_getRelativeLocation(ignoreEscape)
{var relativeLocation=self.location.href;var arrRelativeLocation=relativeLocation.split("/");relativeLocation=arrRelativeLocation[arrRelativeLocation.length-1];if(!ignoreEscape)
{relativeLocation=escape(relativeLocation);}
return relativeLocation;}
function cg_isDefined(object,variable)
{return(typeof(eval(object)[variable])!="undefined");}
if(typeof deconcept=="undefined"){var deconcept=new Object();}if(typeof deconcept.util=="undefined"){deconcept.util=new Object();}if(typeof deconcept.SWFObjectUtil=="undefined"){deconcept.SWFObjectUtil=new Object();}deconcept.SWFObject=function(_1,id,w,h,_5,c,_7,_8,_9,_a){if(!document.getElementById){return;}this.DETECT_KEY=_a?_a:"detectflash";this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY);this.params=new Object();this.variables=new Object();this.attributes=new Array();if(_1){this.setAttribute("swf",_1);}if(id){this.setAttribute("id",id);}if(w){this.setAttribute("width",w);}if(h){this.setAttribute("height",h);}if(_5){this.setAttribute("version",new deconcept.PlayerVersion(_5.toString().split(".")));}this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion();if(!window.opera&&document.all&&this.installedVer.major>7){deconcept.SWFObject.doPrepUnload=true;}if(c){this.addParam("bgcolor",c);}var q=_7?_7:"high";this.addParam("quality",q);this.setAttribute("useExpressInstall",false);this.setAttribute("doExpressInstall",false);var _c=(_8)?_8:window.location;this.setAttribute("xiRedirectUrl",_c);this.setAttribute("redirectUrl","");if(_9){this.setAttribute("redirectUrl",_9);}};deconcept.SWFObject.prototype={useExpressInstall:function(_d){this.xiSWFPath=!_d?"expressinstall.swf":_d;this.setAttribute("useExpressInstall",true);},setAttribute:function(_e,_f){this.attributes[_e]=_f;},getAttribute:function(_10){return this.attributes[_10];},addParam:function(_11,_12){this.params[_11]=_12;},getParams:function(){return this.params;},addVariable:function(_13,_14){this.variables[_13]=_14;},getVariable:function(_15){return this.variables[_15];},getVariables:function(){return this.variables;},getVariablePairs:function(){var _16=new Array();var key;var _18=this.getVariables();for(key in _18){_16[_16.length]=key+"="+_18[key];}return _16;},getSWFHTML:function(){var _19="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");this.setAttribute("swf",this.xiSWFPath);}_19="<embed type=\"application/x-shockwave-flash\" src=\""+this.getAttribute("swf")+"\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\" style=\""+this.getAttribute("style")+"\"";_19+=" id=\""+this.getAttribute("id")+"\" name=\""+this.getAttribute("id")+"\" ";var _1a=this.getParams();for(var key in _1a){_19+=[key]+"=\""+_1a[key]+"\" ";}var _1c=this.getVariablePairs().join("&");if(_1c.length>0){_19+="flashvars=\""+_1c+"\"";}_19+="/>";}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");this.setAttribute("swf",this.xiSWFPath);}_19="<object id=\""+this.getAttribute("id")+"\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\" style=\""+this.getAttribute("style")+"\">";_19+="<param name=\"movie\" value=\""+this.getAttribute("swf")+"\" />";var _1d=this.getParams();for(var key in _1d){_19+="<param name=\""+key+"\" value=\""+_1d[key]+"\" />";}var _1f=this.getVariablePairs().join("&");if(_1f.length>0){_19+="<param name=\"flashvars\" value=\""+_1f+"\" />";}_19+="</object>";}return _19;},write:function(_20){if(this.getAttribute("useExpressInstall")){var _21=new deconcept.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(_21)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title);}}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var n=(typeof _20=="string")?document.getElementById(_20):_20;n.innerHTML=this.getSWFHTML();return true;}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"));}}return false;}};deconcept.SWFObjectUtil.getPlayerVersion=function(){var _23=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var x=navigator.plugins["Shockwave Flash"];if(x&&x.description){_23=new deconcept.PlayerVersion(x.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."));}}else{if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var axo=1;var _26=3;while(axo){try{_26++;axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_26);_23=new deconcept.PlayerVersion([_26,0,0]);}catch(e){axo=null;}}}else{try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(e){try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");_23=new deconcept.PlayerVersion([6,0,21]);axo.AllowScriptAccess="always";}catch(e){if(_23.major==6){return _23;}}try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(e){}}if(axo!=null){_23=new deconcept.PlayerVersion(axo.GetVariable("$version").split(" ")[1].split(","));}}}return _23;};deconcept.PlayerVersion=function(_29){this.major=_29[0]!=null?parseInt(_29[0]):0;this.minor=_29[1]!=null?parseInt(_29[1]):0;this.rev=_29[2]!=null?parseInt(_29[2]):0;};deconcept.PlayerVersion.prototype.versionIsValid=function(fv){if(this.major<fv.major){return false;}if(this.major>fv.major){return true;}if(this.minor<fv.minor){return false;}if(this.minor>fv.minor){return true;}if(this.rev<fv.rev){return false;}return true;};deconcept.util={getRequestParameter:function(_2b){var q=document.location.search||document.location.hash;if(_2b==null){return q;}if(q){var _2d=q.substring(1).split("&");for(var i=0;i<_2d.length;i++){if(_2d[i].substring(0,_2d[i].indexOf("="))==_2b){return _2d[i].substring((_2d[i].indexOf("=")+1));}}}return"";}};deconcept.SWFObjectUtil.cleanupSWFs=function(){var _2f=document.getElementsByTagName("OBJECT");for(var i=_2f.length-1;i>=0;i--){_2f[i].style.display="none";for(var x in _2f[i]){if(typeof _2f[i][x]=="function"){_2f[i][x]=function(){};}}}};if(deconcept.SWFObject.doPrepUnload){if(!deconcept.unloadSet){deconcept.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",deconcept.SWFObjectUtil.cleanupSWFs);};window.attachEvent("onbeforeunload",deconcept.SWFObjectUtil.prepUnload);deconcept.unloadSet=true;}}if(!document.getElementById&&document.all){document.getElementById=function(id){return document.all[id];};}var getQueryParamValue=deconcept.util.getRequestParameter;var FlashObject=deconcept.SWFObject;var SWFObject=deconcept.SWFObject;var cg_reverseAlphaArray=["z","y","x","w","v","u","t"];if(!Curse)
{Curse={};}
Curse.Ajax={http:false,format:'text',callback:function(data){},handler:false,error:false,opt:new Object(),getHTTPObject:function(){var http=false;if(typeof ActiveXObject!='undefined'){try{http=new ActiveXObject("Msxml2.XMLHTTP");}
catch(e){try{http=new ActiveXObject("Microsoft.XMLHTTP");}
catch(E){http=false;}}}else if(XMLHttpRequest){try{http=new XMLHttpRequest();}
catch(e){http=false;}}
return http;},load:function(url,callback,format,method,allowCache,queueFunction,queueFunctionArgs){this.init();if(!this.http||!url)return;if(this.http.overrideMimeType)this.http.overrideMimeType('text/xml');this.callback=callback;this.queueFunction=queueFunction;this.queueFunctionArgs=queueFunctionArgs;if(!method)var method="GET";if(!format)var format="text";this.format=format.toLowerCase();method=method.toUpperCase();var ths=this;if(!allowCache)
{var now="uid="+new Date().getTime();url+=(url.indexOf("?")+1)?"&":"?";url+=now;}
var parameters=null;if(method=="POST"){var parts=url.split("\?");url=parts[0];parameters=parts[1];}
this.http.open(method,url,true);if(method=="POST"){this.http.setRequestHeader("Content-type","application/x-www-form-urlencoded");this.http.setRequestHeader("Content-length",parameters.length);if(!Curse.Browser.ie)
{this.http.setRequestHeader("Connection","close");}}
if(this.handler)
{this.http.onreadystatechange=this.handler;}
else{this.http.onreadystatechange=function()
{if(!ths)return;var http=ths.http;if(http.readyState==4){if(http.status==200){var result="";if(http.responseText)result=http.responseText;if(ths.format.charAt(0)=="j")
{result=result.replace(/[\n\r]/g,"");result=eval('('+result+')');}
else if(ths.format.charAt(0)=="x"){result=http.responseXML;}
if(ths.queueFunction)
{ths.queueFunction(result,ths.callback,ths.queueFunctionArgs);}
else if(ths.callback)
{ths.callback(result)}}
else{if(ths.opt.loadingIndicator)document.getElementsByTagName("body")[0].removeChild(ths.opt.loadingIndicator);if(ths.opt.loading)document.getElementById(ths.opt.loading).style.display="none";if(ths.error)ths.error(http.status);}}}}
this.http.send(parameters);},bind:function(user_options){var opt={'url':'','onSuccess':false,'onError':false,'format':"text",'method':"GET",'update':"",'loading':"",'loadingIndicator':""}
for(var key in opt){if(user_options[key]){opt[key]=user_options[key];}}
this.opt=opt;if(!opt.url)return;if(opt.onError)this.error=opt.onError;var div=false;if(opt.loadingIndicator){div=document.createElement("div");div.setAttribute("style","position:absolute;top:0px;left:0px;");div.setAttribute("class","loading-indicator");div.innerHTML=opt.loadingIndicator;document.getElementsByTagName("body")[0].appendChild(div);this.opt.loadingIndicator=div;}
if(opt.loading)document.getElementById(opt.loading).style.display="block";this.load(opt.url,function(data){if(opt.onSuccess)opt.onSuccess(data);if(opt.update)document.getElementById(opt.update).innerHTML=data;if(div)document.getElementsByTagName("body")[0].removeChild(div);if(opt.loading)document.getElementById(opt.loading).style.display="none";},opt.format,opt.method);},init:function(){this.http=this.getHTTPObject();}};var cg_ajaxQueue=[];var cg_ajaxProcessing=false;function cg_queueAjaxRequest(url,callbackFunction,format,method,callbackArgs,allowCache)
{if(!isNewRequest())
{return;}
var ajaxRequest={};ajaxRequest.url=url;ajaxRequest.callback=callbackFunction;ajaxRequest.callbackArgs=callbackArgs;ajaxRequest.format=format;ajaxRequest.method=method;ajaxRequest.allowCache=allowCache;cg_ajaxQueue.push(ajaxRequest);cg_processAjaxQueue();function isNewRequest()
{if(cg_ajaxQueue.length==0)
{return true;}
for(var i=0,len=cg_ajaxQueue.length;i<len;i++)
{if(cg_ajaxQueue[i].url==url)
{return false;}}
return true;}}
function cg_completeAjaxQueue(data,callback,callbackArgs)
{cg_ajaxProcessing=false;callback(data,callbackArgs);cg_processAjaxQueue();}
function cg_processAjaxQueue()
{if(cg_ajaxProcessing||cg_ajaxQueue.length==0)
{return;}
cg_ajaxProcessing=true;var ajaxRequest=cg_ajaxQueue[0];cg_ajaxQueue.splice(0,1);Curse.Ajax.load(ajaxRequest.url,ajaxRequest.callback,ajaxRequest.format,ajaxRequest.method,ajaxRequest.allowCache,cg_completeAjaxQueue,ajaxRequest.callbackArgs);}
if(!Curse)
{var Curse={};}
Curse.Mouse={x:0,y:0,initialize:function()
{cg_addEventListener(document,"mousemove",this.update);cg_addEventListener(document,"mouseout",this.update);},update:function(e)
{if(window.event)
{Curse.Mouse.x=window.event.clientX;Curse.Mouse.y=window.event.clientY;Curse.Mouse.y+=cg_scrollTop();}
else
{Curse.Mouse.x=e.pageX;Curse.Mouse.y=e.pageY;}}};Curse.Mouse.initialize();if(!Curse){var Curse={};}
Curse.Icon=function(size,id,link,relatedID,elementID,overFn,overArgs,outFn,outArgs,num,quantity,showNum,spritePath,spritePosition,baseUrl)
{return this.initialize(size,id,link,relatedID,elementID,overFn,overArgs,outFn,outArgs,num,quantity,showNum,spritePath,spritePosition,baseUrl);}
Curse.Icon.prototype={sizes:["small","medium","large"],paths:["s","m","l"],initialize:function(size,id,link,relatedID,elementID,overFn,overArgs,outFn,outArgs,num,quantity,showNum,spritePath,spritePosition,baseUrl)
{var icon=cg_ce("div");icon.className="icon"+this.sizes[size];var tile=cg_ce("div");tile.className="tile";if(elementID)
{icon.id=elementID;}
if(!baseUrl)
{baseUrl="";}
if(spritePath!=null)
{var sprite=cg_ce("div");sprite.className="sprite";sprite.style.backgroundImage="url("+baseUrl+spritePath+")";if(spritePosition)
{sprite.style.backgroundPosition=spritePosition;}
cg_ae(icon,sprite);var border=cg_ce("var");cg_ae(tile,border);icon.divSprite=sprite;icon.varBorder=border;}
else
{icon.style.backgroundImage="url("+baseUrl+"icons/"+this.paths[size]+"/"+id+".gif)";}
if(link||overFn){var a=cg_ce("a");if(relatedID)
{a._relatedID=relatedID;icon.aLink=a;}
if(overFn)
{a.onmouseover=overFn.bind(this,a,overArgs);}
if(outFn)
{a.onmouseout=outFn.bind(this,a,outArgs);}
if(link){a.href=link;}
else
{a.href="javascript:;";cg_ds(a);}
cg_ae(tile,a);}
if(showNum||(num!=null&&(num>1||num.length))){var shadowText=cg_getShadowText(num,"r1");shadowText.style.right="0";shadowText.style.bottom="0";shadowText.style.position="absolute";cg_ae(tile,shadowText);}
if(quantity!=null&&quantity>0){var shadowText=cg_getShadowText("("+quantity+")","r");shadowText.style.left="0";shadowText.style.top="0";shadowText.style.position="absolute";cg_ae(tile,shadowText);}
cg_ae(icon,tile);return icon;},over:function(){if(this.relatedTooltip!=null){Tooltip.show(this,this.relatedTooltip,0,0);}},out:function(){Tooltip.hide();}};Curse.Tooltip={initialize:function()
{if(Curse.Tooltip.container)
{return;}
Curse.Tooltip.container=cg_ce("div");Curse.Tooltip.container.className="tooltip-container";Curse.Tooltip.icons=[];Curse.Tooltip.tooltips=[];for(var i=0;i<3;i++)
{Curse.Tooltip.icons[i]=cg_ce("div");Curse.Tooltip.icons[i].className="tooltip-icon";var iconFrame=cg_ce("div");cg_ae(Curse.Tooltip.icons[i],iconFrame);cg_ae(Curse.Tooltip.container,Curse.Tooltip.icons[i]);Curse.Tooltip.tooltips[i]=cg_ce("div");Curse.Tooltip.tooltips[i].className="tooltip";Curse.Tooltip.tooltips[i]._text=td=cg_ce("td");var t=cg_ce("table"),tb=cg_ce("tbody"),tr1=cg_ce("tr"),tr2=cg_ce("tr"),th1=cg_ce("th"),th2=cg_ce("th"),th3=cg_ce("th");th1.style.backgroundPosition="top right";th2.style.backgroundPosition="bottom left";th3.style.backgroundPosition="bottom right";cg_ae(tr1,td);cg_ae(tr1,th1);cg_ae(tb,tr1);cg_ae(tr2,th2);cg_ae(tr2,th3);cg_ae(tb,tr2);cg_ae(t,tb);cg_ae(Curse.Tooltip.tooltips[i],t);cg_ae(Curse.Tooltip.container,Curse.Tooltip.tooltips[i]);}
cg_ae(document.body,Curse.Tooltip.container);},showTip:function(text)
{text="<span class=\"r\">"+text+"</span>";Curse.Tooltip.show(text);Curse.Tooltip.updatePosition();},hide:function(){Curse.Tooltip.currentTooltipId=null;if(Curse.Tooltip.container)
{Curse.Tooltip.hideIcons();Curse.Tooltip.container.style.display="none";Curse.Tooltip.container.style.width="auto";for(var i=0;i<Curse.Tooltip.tooltips.length;i++)
{Curse.Tooltip.tooltips[i]._text.innerHTML="";Curse.Tooltip.tooltips[i].style.display="none";}}},hideIcons:function()
{for(var i=0,len=Curse.Tooltip.icons.length;i<len;i++)
{Curse.Tooltip.icons[i].style.backgroundImage="";Curse.Tooltip.icons[i].style.display="none";}},show:function(text1,text2,text3)
{if(Curse.Tooltip.container==null)
{Curse.Tooltip.initialize();}
Curse.Tooltip.tooltips[0]._text.innerHTML=text1;Curse.Tooltip.tooltips[0].style.display="block";if(text2!=null)
{Curse.Tooltip.tooltips[1]._text.innerHTML=text2;Curse.Tooltip.tooltips[1].style.display="block";}
if(text3!=null)
{Curse.Tooltip.tooltips[2]._text.innerHTML=text3;Curse.Tooltip.tooltips[2].style.display="block";}
Curse.Tooltip.container.style.visibility="hidden";Curse.Tooltip.container.style.display="block";Curse.Tooltip.updatePosition();Curse.Tooltip.container.style.visibility="visible";},updatePosition:function()
{if(!Curse.Tooltip.container)
{return;}
if(Curse.Tooltip.container.style.display!="block")
{return;}
Curse.Tooltip.updateSize();var paddingWidth=15,paddingHeight=20,scrollPad=20,viewportHeight=Curse.Client.viewportHeight(),viewportWidth=Curse.Client.viewportWidth()-scrollPad,boundTop=Curse.Client.scrollTop(),boundBottom=viewportHeight+boundTop,tooltipHeight=Curse.Tooltip.container.offsetHeight,tooltipWidth=Curse.Tooltip.container.offsetWidth,boundLeft=0,boundRight=viewportWidth,mousePos={x:Curse.Mouse.x,y:Curse.Mouse.y},newTop=mousePos.y+paddingHeight,newLeft=mousePos.x+paddingWidth,inversePosition=false;Curse.Tooltip.orientation="bottom";if(Curse.Tooltip.inversed)
{Curse.Tooltip.orientation="top";paddingWidth=10;}
if(Curse.Tooltip.inversed||(newTop+tooltipHeight)>=boundBottom)
{Curse.Tooltip.orientation="top";newTop=mousePos.y-tooltipHeight-paddingHeight;if(newTop<0)
{newTop=(viewportHeight-tooltipHeight)/2;}}
else
{newTop=mousePos.y+paddingHeight;}
if(Curse.Tooltip.inversed||(newLeft+tooltipWidth)>=boundRight)
{newLeft=boundRight-Curse.Tooltip.container.offsetWidth;}
if(newTop<boundTop)
{newTop=boundTop;Curse.Tooltip.orientation="top"}
if(newLeft<boundLeft)
{newLeft=boundLeft;}
Curse.Tooltip.container.style.top=newTop+"px";Curse.Tooltip.container.style.left=newLeft+"px";Curse.Tooltip.updateOrientation();},updateOrientation:function()
{if(Curse.Tooltip.orientation=="top"&&Curse.Tooltip.container.offsetHeight>Curse.Tooltip.tooltips[0].offsetHeight)
{for(var i=0,len=Curse.Tooltip.tooltips.length;i<len;i++)
{if(Curse.Tooltip.tooltips[i].style.display=="block")
{Curse.Tooltip.tooltips[i].style.top="auto";Curse.Tooltip.tooltips[i].style.bottom=(Curse.Tooltip.tooltips[i].offsetHeight-Curse.Tooltip.container.offsetHeight)+"px";Curse.Tooltip.icons[i].style.top=(Curse.Tooltip.container.offsetHeight-Curse.Tooltip.tooltips[i].offsetHeight)+"px";}}}
else
{for(var i=0,len=Curse.Tooltip.tooltips.length;i<len;i++)
{Curse.Tooltip.tooltips[i].style.top=Curse.Tooltip.tooltips[i].style.bottom="auto";Curse.Tooltip.icons[i].style.top=Curse.Tooltip.icons[i].style.bottom="auto";}}},updateSize:function()
{var width=0;for(var i=0;i<3;i++)
{width+=Curse.Tooltip.tooltips[i].offsetWidth+Curse.Tooltip.icons[i].offsetWidth;}
Curse.Tooltip.container.style.width=width+"px";},setIcons:function(args)
{Curse.Tooltip.initialize();for(var i=0,len=args.length;i<len;i++)
{if(args[i]==null)
{continue;}
Curse.Tooltip.icons[args[i].index].style.backgroundImage="url("+args[i].image+")";Curse.Tooltip.icons[args[i].index].style.display="block";}},updateTooltip:function(index,text)
{Curse.Tooltip.tooltips[index]._cell.innerHTML=text;},setCurrentTooltip:function(id)
{Curse.Tooltip.currentTooltipId=id;},getCurrentTooltip:function()
{return Curse.Tooltip.currentTooltipId;}}
cg_addEventListener(document,"mousemove",Curse.Tooltip.updatePosition);if(!Curse.WOWDB)
{Curse.WOWDB={};}
Curse.Tooltip.baseURL="";Curse.Tooltip.handleSpellLinkOver=function(link,args,e)
{if(args==null)
{args={};}
args.relatedLink=link;Curse.Tooltip.showSpellTooltip(link._relatedID,args,e);}
Curse.Tooltip.showSpellTooltip=function(id,args,e)
{var spell=cg_spells[id];if(!spell||!spell.tooltip)
{Curse.Tooltip.setCurrentTooltip(id);Curse.Tooltip.loadAsync(id,args.relatedLink,Curse.Tooltip.handleAjaxSpell);return;}
if(args)
{var hideIcon=args["hideIcon"];}
if(!hideIcon)
{Curse.Tooltip.setIcons([{index:0,image:Curse.Tooltip.baseURL+"icons/m/"+spell.icon+".gif"}]);}
Curse.Tooltip.show(spell.tooltip);}
Curse.Tooltip.handleTalentLinkOver=function(link,args,e)
{Curse.Tooltip.showTalentTooltip(link._relatedID,args,e);}
Curse.Tooltip.showTalentTooltip=function(id,args,e)
{var talent=args.talents.byRank[id];if(!talent)
{return;}
Curse.Tooltip.show(talent.tooltip);}
Curse.Tooltip.loadAsync=function(id,relatedLink,handler)
{if(cg_isDefined(window,'cg_wowdbsyndication'))
{cg_wowdbsyndication.addExternalReference(id,relatedLink,handler,true);return;}
var url="ajaxTooltip.aspx?id="+id;if(handler==Curse.Tooltip.handleAjaxQuest)
{url+="&type=4";}
else if(handler==Curse.Tooltip.handleAjaxSpell)
{url+="&type=6";}
cg_queueAjaxRequest(url,handler,"text","get",relatedLink,true);}
Curse.Tooltip.handleItemLinkOver=function(link,args,e)
{if(!link._relatedID)
{var lpattern=new RegExp("(item|spell)\\.aspx\\?id=(\\d+)");var match=lpattern.exec(link.href);if(!match)
{return;}
link._relatedID=match[2];}
var item=cg_items[link._relatedID];if(!item||!item.tooltip)
{Curse.Tooltip.setCurrentTooltip(link._relatedID);Curse.Tooltip.loadAsync(link._relatedID,link,Curse.Tooltip.handleAjaxItem);return;}
var hideIcon,character,isEquipped;if(args)
{hideIcon=args["hideIcon"];character=args["relatedCharacter"];isEquipped=args["isEquipped"];}
var cids=Curse.Tooltip.getComparisonItems(item.id,item.slot,character,isEquipped);if(!args)
{args={};}
args.relatedLink=link;Curse.Tooltip.showItemTooltip(cids,args);}
Curse.Tooltip.showItemTooltip=function(itemids,args)
{var item,desc2,desc3;if(args==null)
{args={};}
if(args.relatedCharacter!=null)
{var item=args.relatedCharacter.itemsById[itemids[0]];}
else
{var item=cg_items[itemids[0]];if(!item||!item.tooltip)
{args.relatedLink._relatedID=itemids[0];Curse.Tooltip.setCurrentTooltip(args.relatedLink._relatedID);Curse.Tooltip.loadAsync(args.relatedLink._relatedID,args.relatedLink,Curse.Tooltip.handleAjaxItem);return;}}
if(item==null)
{return;}
var icons=[];var text=[];for(var i=0,len=itemids.length;i<len;i++)
{if(itemids[i]==null)
{continue;}
if(i==0&&args.relatedCharacter!=null)
{var item=args.relatedCharacter.itemsById[itemids[i]];}
else
{var item=cg_items[itemids[i]];}
if(item!=null&&item.tooltip)
{if(i>0||!args.hideIcon)
{icons[i]={index:i,image:Curse.Tooltip.baseURL+"icons/m/"+item.icon+".gif"}}
text[i]=item.tooltip;if(i>0)
{text[i]+=Curse.Tooltip.getStatDiffsHTML(cg_items[itemids[0]],item);}}
else
{Curse.Tooltip.loadAsync(itemids[i],args.relatedLink,Curse.Tooltip.handleAjaxItem);}}
if(icons.length>0)
{Curse.Tooltip.setIcons(icons);}
Curse.Tooltip.show(text[0],text[1],text[2]);};Curse.Tooltip.handleQuestLinkOver=function(link,e)
{Curse.Tooltip.showQuestTooltip(link._relatedID,link);}
Curse.Tooltip.showQuestTooltip=function(questid,link)
{var quest=cg_quests[questid];if(quest!=null)
{Curse.Tooltip.show(quest.tooltip);}
else
{Curse.Tooltip.setCurrentTooltip(link._relatedID);Curse.Tooltip.loadAsync(questid,link,Curse.Tooltip.handleAjaxQuest);}};Curse.Tooltip.handleAjaxItem=function(data,link)
{var newItem=eval('('+data+')');cg_items.addData(newItem);if(Curse.Tooltip.getCurrentTooltip()==link._relatedID)
{link.onmouseover();}
return;}
Curse.Tooltip.handleAjaxQuest=function(data,link)
{var newQuest=eval('('+data+')');cg_quests.addData(newQuest);if(Curse.Tooltip.getCurrentTooltip()==link._relatedID)
{link.onmouseover();}
return;}
Curse.Tooltip.handleAjaxSpell=function(data,link)
{cg_spells.addData(eval("("+data+")"));if(Curse.Tooltip.getCurrentTooltip()==link._relatedID)
{link.onmouseover();}
return;}
Curse.Tooltip.getStatDiffs=function(compareToItem,masterItem)
{function calculateStatDiffs(stat1,stat2)
{function getCStat(stat,id)
{for(var i=0;i<stat.length;i++)
{if(stat[i].id==id)
return stat[i].val;}
return 0;}
var sdifs=[];var sdone=[];for(var i=0;i<stat1.length;i++)
{var stat=stat1[i];if((stat.id==0)||(stat.id==8))
continue;if(!sdone[stat.id])
{var val=0;var sname;if(stat.id==7||stat.id==14)
{var vals1=stat.val.split('-');var nval=(((vals1[0]*1)+(vals1[1]*1))/2.0)/getCStat(stat1,stat.id+1);var damageRange2=getCStat(stat2,stat.id);if(damageRange2==0)
{continue;}
var vals2=damageRange2.split('-');var nval2=(((vals2[0]*1)+(vals2[1]*1))/2.0)/getCStat(stat2,stat.id+1);val=roundperc(nval-nval2);sname=Localization.dps;}
else
{var compVal=getCStat(stat2,stat.id);val=roundperc(stat.val-compVal);sname=statnames[stat.id];}
sdifs.push({name:sname,val:val});sdone[stat.id]=true;}}
for(var i=0;i<stat2.length;i++)
{var stat=stat2[i];if((stat.id==0)||(stat.id==8))
continue;if(sdone[stat.id]==null)
{var val=getCStat(stat1,stat.id)-stat.val;sdifs.push({name:statnames[stat.id],val:val});sdone[stat.id]=1;}}
return sdifs;}
var masterStats=masterItem.stats;if(!masterStats)
{return;}
var compareToStats=compareToItem.stats;if(!compareToStats)
{return;}
if(masterStats==null||compareToStats==null)
{return null;}
return calculateStatDiffs(masterStats,compareToStats);};Curse.Tooltip.getStatDiffsHTML=function(masterItem,compareToItem)
{if(masterItem.id==compareToItem.id)
{return"";}
var arrStatDiffs=Curse.Tooltip.getStatDiffs(compareToItem,masterItem);if(arrStatDiffs==null)
{return"";}
var tooltipHTML="<div class=\"itemTooltipStatChangeList\">"+Localization.if_equip+" "+masterItem.getNameWithStyle();var statGainsHTML=[];var statLossesHTML=[];for(var j=0;j<arrStatDiffs.length;j++)
{var sdif=arrStatDiffs[j];if(sdif.val<=0)
continue;statGainsHTML.push("<span class=r"+((sdif.val>0)?('2'):('7'))+">"+((sdif.val>0)?('+'):(''))+sdif.val+" "+sdif.name+"</span>");}
for(var j=0;j<arrStatDiffs.length;j++)
{var sdif=arrStatDiffs[j];if(sdif.val>=0)
continue;statLossesHTML.push("<span class=r"+((sdif.val>0)?('2'):('7'))+">"+((sdif.val>0)?('+'):(''))+sdif.val+" "+sdif.name+"</span>");}
if(statGainsHTML.length>0)
{tooltipHTML+="<br>"+Localization.you_will_gain+" "+statGainsHTML.join(", ");}
if(statLossesHTML.length>0)
{tooltipHTML+="<br>"+Localization.you_will_lose+" "+statLossesHTML.join(", ");}
tooltipHTML+="</div>";return tooltipHTML;}
Curse.Tooltip.getComparisonItems=function(itemID,itemSlot,character,isEquippedItem)
{var cids=new Array(3);cids[0]=itemID;if(isEquippedItem!=null||cg_isDefined(window,'cg_wowdbsyndication'))
{return cids;}
if(character)
{var cslot=cg_getCSlotFromISlot(itemSlot);for(var i=0;i<cslot.length;i++)
{var charItem=character.getCharItemBySlot(cslot[i]);if(charItem)
{cids[i+1]=charItem.id;}}
return cids;}
else
{var citem=cg_buildTooltipIds(itemID,itemSlot)+"";cids=citem.split("|");if(cids[1]&&cids[1]=="null")
{cids[1]=null;}
if(cids[2]&&cids[2]=="null")
{cids[2]=null;}
return cids;}
if(!citem)
{cids[0]=itemID;return cids;}
else
{}
return cids;}
function cg_buildTooltipIds(id,slot)
{if((slot=="17")||(slot=="21"))
{if((cg_getCookie("Settings.PinnedItem.item_17")!=null)&&(cg_getCookie("Settings.PinnedItem.item_17")!="null"))
{return id+"|"+cg_getCookie("Settings.PinnedItem.item_17");}
else if((cg_getCookie("Settings.PinnedItem.item_21")!=null)&&(cg_getCookie("Settings.PinnedItem.item_21")!="null"))
{return id+"|"+cg_getCookie("Settings.PinnedItem.item_21");}
else if((cg_getCookie("Settings.PinnedItem.item_13")!=null)&&(cg_getCookie("Settings.PinnedItem.item_13")!="null"))
{var vals=cg_getCookie("Settings.PinnedItem.item_13").split("|");return id+"|"+vals[0];}
return id+"|"+cg_getCookie("Settings.PinnedItem.item_"+slot);}
if((slot=="5")||(slot=="20"))
{if((cg_getCookie("Settings.PinnedItem.item_5")!=null)&&(cg_getCookie("Settings.PinnedItem.item_5")!="null"))
{return id+"|"+cg_getCookie("Settings.PinnedItem.item_5");}
else if(cg_getCookie("Settings.PinnedItem.item_20")!=null&&cg_getCookie("Settings.PinnedItem.item_20")!="null")
{return id+"|"+cg_getCookie("Settings.PinnedItem.item_20");}
return id;}
else if((slot=="22")||(slot=="14")||(slot=="23"))
{if((cg_getCookie("Settings.PinnedItem.item_22")!=null)&&(cg_getCookie("Settings.PinnedItem.item_22")!="null"))
return id+"|"+cg_getCookie("Settings.PinnedItem.item_22");else if((cg_getCookie("Settings.PinnedItem.item_14")!=null)&&(cg_getCookie("Settings.PinnedItem.item_14")!="null"))
return id+"|"+cg_getCookie("Settings.PinnedItem.item_14");else if((cg_getCookie("Settings.PinnedItem.item_23")!=null)&&(cg_getCookie("Settings.PinnedItem.item_23")!="null"))
return id+"|"+cg_getCookie("Settings.PinnedItem.item_23");else if((cg_getCookie("Settings.PinnedItem.item_13")!=null)&&(cg_getCookie("Settings.PinnedItem.item_13")!="null"))
{var vals=cg_getCookie("Settings.PinnedItem.item_13").split("|");if((vals[1]!="")&&(vals[1]!=null))
return id+"|"+vals[1];}
return id+"|"+cg_getCookie("Settings.PinnedItem.item_"+slot);}
else if(slot=="13")
{var txt=id;if((cg_getCookie("Settings.PinnedItem.item_13")!="null")&&(cg_getCookie("Settings.PinnedItem.item_13")!=null))
{var vals=cg_getCookie("Settings.PinnedItem.item_13").split("|");if((vals[0]!="")&&(vals[0]!=null)&&(vals[0]!="null"))
txt+="|"+vals[0];}
if((cg_getCookie("Settings.PinnedItem.item_17")!="null")&&(cg_getCookie("Settings.PinnedItem.item_17")!=null))
txt+="|"+cg_getCookie("Settings.PinnedItem.item_17");if((cg_getCookie("Settings.PinnedItem.item_21")!="null")&&(cg_getCookie("Settings.PinnedItem.item_21")!=null))
txt+="|"+cg_getCookie("Settings.PinnedItem.item_21");if((cg_getCookie("Settings.PinnedItem.item_22")!="null")&&(cg_getCookie("Settings.PinnedItem.item_22")!=null))
txt+="|"+cg_getCookie("Settings.PinnedItem.item_22");if((cg_getCookie("Settings.PinnedItem.item_14")!="null")&&(cg_getCookie("Settings.PinnedItem.item_14")!=null))
txt+="|"+cg_getCookie("Settings.PinnedItem.item_14");if((cg_getCookie("Settings.PinnedItem.item_23")!="null")&&(cg_getCookie("Settings.PinnedItem.item_23")!=null))
txt+="|"+cg_getCookie("Settings.PinnedItem.item_23");if((cg_getCookie("Settings.PinnedItem.item_13")!="null")&&(cg_getCookie("Settings.PinnedItem.item_13")!=null))
{if((vals[1]!="")&&(vals[1]!=null)&&(vals[1]!="null"))
txt+="|"+vals[1];}
return txt;}
else
{if((cg_getCookie("Settings.PinnedItem.item_"+slot)!=null)&&(cg_getCookie("Settings.PinnedItem.item_"+slot)!="null"))
{var txt=id;vals=cg_getCookie("Settings.PinnedItem.item_"+slot).split("|");if((vals[0]!=null)&&(vals[0]!=""))
txt+="|"+vals[0];if((vals[1]!=null)&&(vals[1]!=""))
txt+="|"+vals[1];return txt;}
else
{return id;}}}
var cg_items={};cg_items.addData=function(data)
{if(data.length==null)
{dataArray=[];dataArray[0]=data;}
else
{dataArray=data;}
for(var i=0,len=dataArray.length;i<len;i++)
{cg_items[dataArray[i].id]=dataArray[i];cg_items[dataArray[i].id].getNameWithStyle=Curse.WOWDB.Item.getNameWithStyle;cg_items[dataArray[i].id].getNameWithRarity=Curse.WOWDB.Item.getNameWithRarity;cg_items[dataArray[i].id].getName=Curse.WOWDB.Item.getName;cg_items[dataArray[i].id].createIcon=Curse.WOWDB.Item.createIcon;cg_items[dataArray[i].id].isCharacterItem=Curse.WOWDB.Item.isCharacterItem;cg_items[dataArray[i].id].isEquipableItem=Curse.WOWDB.Item.isEquipableItem;}}
Curse.WOWDB.Item={};Curse.WOWDB.Item.isCharacterItem=function()
{return Curse.WOWDB.Item.armorSlots.indexOf(this.slot)>=0;}
Curse.WOWDB.Item.isEquipableItem=function(slot)
{return Curse.WOWDB.Item.heldSlots.indexOf(this.slot)>=0;}
Curse.WOWDB.Item.armorSlots=[1,2,3,4,5,6,7,8,9,10,11,12,16,20];Curse.WOWDB.Item.heldSlots=[12,13,14,15,17,21,22,23,25,26,28];Curse.WOWDB.Item.createIcon=function(size,num,showNum,baseURL)
{if(!baseURL)
{baseURL="";}
return new Curse.Icon(size,this.icon,baseURL+"item.aspx?id="+this.id,this.id,null,Curse.Tooltip.handleItemLinkOver,{hideIcon:true},Curse.Tooltip.hide,null,num,null,showNum,null,null,baseURL);};Curse.WOWDB.Item.getNameWithStyle=function()
{if(this.nameWithStyle)
{return this.nameWithStyle;}
var name="<span "+this.tooltip.substring(2,this.tooltip.indexOf("</b>"))+"</span>";this.nameWithStyle=name;return this.nameWithStyle;};Curse.WOWDB.Item.getName=function()
{if(this.name)
{return this.name;}
var name=this.tooltip.substring(2,this.tooltip.indexOf("</b>"))
name=name.substring(name.indexOf(">")+1);this.name=name;return this.name;};Curse.WOWDB.Item.getNameWithRarity=function()
{if(!this.name)
{name=this.getName();}
if(!this.rarity)
{this.rarity=this.tooltip.substring(10,this.tooltip.indexOf(">"));}
return{name:this.name,rarity:this.rarity};};Curse.WOWDB.Item.fixSocketText=function(item)
{var tooltip=item.tooltip;var socket=new RegExp('(\\<a href=\\"search\\.aspx\\?[\\w|\\d|\\s|=|&]+\\" class=\\"socket\\-\\d \\w\\d\\"\\>)',"g");var socketng=new RegExp('(\\<a href=\\"search\\.aspx\\?[\\w|\\d|\\s|=|&]+\\" class=\\"socket\\-\\d \\w\\d\\"\\>)');var matches=tooltip.match(socket);if(matches!=null)
{for(var i=0;i<matches.length;i++)
{item.gtot++;tooltip=tooltip.replace(socketng,matches[i].replace(/\>/," id='socketLine"+i+"'>"));}}
item.tooltip=tooltip;};var cg_quests={};cg_quests.addData=function(data)
{if(data.length==null)
{dataArray=[];dataArray[0]=data;}
else
{dataArray=data;}
for(var i=0,len=dataArray.length;i<len;i++)
{cg_quests[dataArray[i].id]=dataArray[i];}}
var cg_spells={};cg_spells.addData=function(data)
{if(data.length==null)
{var dataArray=[];dataArray[0]=data;}
else
{var dataArray=data;}
for(var i=0,len=dataArray.length;i<len;i++)
{cg_spells[dataArray[i].id]=dataArray[i];cg_spells[dataArray[i].id].createIcon=Curse.WOWDB.Spell.createIcon;cg_spells[dataArray[i].id].getName=Curse.WOWDB.Spell.getName;}}
Curse.WOWDB.Spell={};Curse.WOWDB.Spell.createIcon=function(size,baseURL)
{if(!baseURL)
{baseURL="";}
return new Curse.Icon(size,this.icon,baseURL+"spell.aspx?id="+this.id,this.id,null,Curse.Tooltip.handleSpellLinkOver,{hideIcon:true},Curse.Tooltip.hide,null,null,null,null,null,null,baseURL);};Curse.WOWDB.Spell.getName=function()
{if(this.name)
{return this.name;}
var name=this.tooltip.substring(this.tooltip.indexOf("<b>")+3,this.tooltip.indexOf("</b>"));this.name=name;return this.name;};if(!Curse.WOWDB)
{Curse.WOWDB={};}
Curse.WOWDB.Syndication=function()
{this.initialize();}
Curse.WOWDB.Syndication.prototype={baseURL:"http://www.wowdb.com/",bindEvents:function()
{var closure=this.parseLinks.bindAsEventListener(this);cg_addEventListener(window,"load",closure)},initialize:function()
{if(this.baseURL.indexOf("$siteurl")==0)
{this.baseURL="http://localhost/wowdb/";}
Curse.Tooltip.baseURL=this.baseURL;this.insertStyleSheet();this.bindEvents();this.loadedObjects={};this.links={};this.externalReferences=[];},insertStyleSheet:function()
{var hd=document.getElementsByTagName("head")[0];var css=document.createElement("link");css.rel="stylesheet";css.type="text/css";css.href=this.baseURL+"tooltips.css?76";hd.appendChild(css);},addExternalReference:function(id,relatedLink,handler,loadNow)
{var type=null;if(handler==Curse.Tooltip.handleAjaxItem)
{type="1";}
else if(handler==Curse.Tooltip.handleAjaxQuest)
{type="4";}
else if(handler==Curse.Tooltip.handleAjaxSpell)
{type="6";}
if(this.loadedObjects[type+"_"+id])
{return;}
this.loadedObjects[type+"_"+id]=true;var url="ExTooltips.aspx?id="+id+"&type="+type;if(loadNow)
{var hd=document.getElementsByTagName("head")[0];var oscript=document.createElement("script");oscript.type="text/javascript";oscript.src=this.baseURL+url;hd.appendChild(oscript);}
else
{this.externalReferences.push(url);}},addObject:function(type,data)
{var link=null;switch(type)
{case 1:this.handleItemLoad(data);break;case 4:this.handleQuestLoad(data);break;case 6:this.handleSpellLoad(data);break;}},parseLinks:function()
{var linksCol=document.getElementsByTagName("a");var lpattern=new RegExp("wowdb\\.com\\/(item|spell|quest)\\.aspx\\?id=(\\d+)");for(var i=0;i<linksCol.length;i++)
{var match=lpattern.exec(linksCol[i].href);if(match)
{var entityTypeID=1;var entityType=match[1];var entityID=match[2];linksCol[i].id=entityType+"_"+entityID;linksCol[i]._relatedID=entityID;if(this.links[linksCol[i].id]==null)
{this.links[linksCol[i].id]=[];}
this.links[linksCol[i].id].push(linksCol[i]);if(entityType=="item")
{this.setItemLink(linksCol[i]);}
else if(entityType=="spell")
{this.setSpellLink(linksCol[i]);}
else if(entityType=="quest")
{linksCol[i].onmouseover=Curse.Tooltip.handleQuestLinkOver.bind(this,linksCol[i]);}
linksCol[i].onmouseout=Curse.Tooltip.hide;}}
var hd=document.getElementsByTagName("head")[0];for(var i=0;i<this.externalReferences.length;i++)
{var oscript=document.createElement("script");oscript.type="text/javascript";oscript.src=this.baseURL+this.externalReferences[i];hd.appendChild(oscript);}
this.externalReferences=[];},handleSpellLoad:function(data)
{cg_spells.addData(data);var linkArray=this.links["spell_"+data.id];var id=data.id;for(var i=0;i<linkArray.length;i++)
{var link=linkArray[i];if(link.className.indexOf("wowdb-spell-full")==0)
{var arrLinkStyle=link.className.split("-");if(arrLinkStyle.length==4)
{iconSize=arrLinkStyle[3];}
var fullSpell=this.getFullSpell(cg_spells[id],null,iconSize,null);oReplace=link.parentNode.replaceChild(fullSpell,link);}
else if(link.className.indexOf("wowdb-spell-text")==0)
{var spellLink=this.getSpellLink(cg_spells[id],null);oReplace=link.parentNode.replaceChild(spellLink,link);}
else
{if(Curse.Tooltip.getCurrentTooltip()==link._relatedID)
{link.onmouseover();}}}},handleQuestLoad:function(data)
{cg_quests.addData(data);var linkArray=this.links["quest_"+data.id];var id=data.id;for(var i=0;i<linkArray.length;i++)
{var link=linkArray[i];if(Curse.Tooltip.getCurrentTooltip()==link._relatedID)
{link.onmouseover();}}},handleItemLoad:function(data)
{cg_items.addData(data);var linkArray=this.links["item_"+data.id];var id=data.id;for(var i=0;i<linkArray.length;i++)
{var link=linkArray[i];if(link.className.indexOf("wowdb-item-full")==0)
{var arrLinkStyle=link.className.split("-");if(arrLinkStyle.length==4)
{iconSize=arrLinkStyle[3];}
var fullItem=this.getFullItem(cg_items[id],null,iconSize,null);oReplace=link.parentNode.replaceChild(fullItem,link);}
else if(link.className.indexOf("wowdb-item-text")==0)
{var textItem=this.getItemLink(cg_items[id],null);oReplace=link.parentNode.replaceChild(textItem,link);}
else
{if(Curse.Tooltip.getCurrentTooltip()==link._relatedID)
{link.onmouseover();}}}},getSpellLink:function(spell,tooltipLabel)
{if(!tooltipLabel)
{tooltipLabel=spell.getName();}
var a=cg_ce("a");cg_ae(a,cg_ct(tooltipLabel));a.href=this.baseURL+"spell.aspx?id="+spell.id;a._relatedID=spell.id;a.onmouseover=Curse.Tooltip.handleSpellLinkOver.bind(this,a);a.onmouseout=Curse.Tooltip.hide;return a;},getItemLink:function(item,tooltipLabel)
{if(!tooltipLabel)
{tooltipLabel=item.getNameWithRarity().name;}
var a=cg_ce("a");a.className="r"+item.getNameWithRarity().rarity;cg_ae(a,cg_ct(tooltipLabel));a.href=this.baseURL+"item.aspx?id="+item.id;a._relatedID=item.id;a.onmouseover=Curse.Tooltip.handleItemLinkOver.bind(this,a);a.onmouseout=Curse.Tooltip.hide;return a;},getFullItem:function(item,tooltipLabel,iconSize,iconOnly)
{if(iconOnly==null)
{iconOnly=false;}
var a=this.getItemLink(item,tooltipLabel);if(!iconSize)
{iconSize=1;}
else
{switch(iconSize)
{case"small":iconSize=0;break;case"medium":iconSize=1;break;case"large":iconSize=2;break;}}
var tbl=document.createElement("TABLE");tbl.className="wowdb-table";var tbody=cg_ce('tbody');var row=cg_ce('tr');var oIconCell=cg_ce('td');var oLinkCell=cg_ce('td');cg_ae(oIconCell,item.createIcon(iconSize,0,0,this.baseURL));cg_ae(oLinkCell,a);row.appendChild(oIconCell);row.appendChild(oLinkCell);tbody.appendChild(row);tbl.appendChild(tbody);return tbl;},getFullSpell:function(spell,tooltipLabel,iconSize,iconOnly)
{if(iconOnly==null)
{iconOnly=false;}
var a=this.getSpellLink(spell,tooltipLabel);if(!iconSize)
{iconSize=1;}
else
{switch(iconSize)
{case"small":iconSize=0;break;case"medium":iconSize=1;break;case"large":iconSize=2;break;}}
var tbl=document.createElement("TABLE");tbl.className="wowdb-table";var tbody=cg_ce('tbody');var row=cg_ce('tr');var oIconCell=cg_ce('td');var oLinkCell=cg_ce('td');cg_ae(oIconCell,spell.createIcon(iconSize,this.baseURL));cg_ae(oLinkCell,a);row.appendChild(oIconCell);row.appendChild(oLinkCell);tbody.appendChild(row);tbl.appendChild(tbody);return tbl;},setItemLink:function(link)
{if(link.className.indexOf("wowdb-item")<0)
{link.onmouseover=Curse.Tooltip.handleItemLinkOver.bind(this,link);return;}
this.addExternalReference(link._relatedID,link,Curse.Tooltip.handleAjaxItem);},setSpellLink:function(link)
{if(link.className.indexOf("wowdb-spell")<0)
{link.onmouseover=Curse.Tooltip.handleSpellLinkOver.bind(this,link);return;}
this.addExternalReference(link._relatedID,link,Curse.Tooltip.handleAjaxSpell);},detectDoctype:function()
{var re=/\s+(X?HTML)\s+([\d\.]+)\s*([^\/]+)*\//gi;var res=false;if(typeof document.namespaces!="undefined")
{res=document.all[0].nodeType==8?re.test(document.all[0].nodeValue):false;}
else
{res=document.doctype!=null?re.test(document.doctype.publicId):false;}
if(res){res=new Object();res['xhtml']=RegExp.$1;res['version']=RegExp.$2;res['importance']=RegExp.$3;return res;}
else
{return null;}},useFixedWidths:function()
{if(!Curse.Browser.ie)
{return false;}
if(Curse.Browser.ie6)
{return true;}
if(Curse.Browser.ie7)
{var doctype=this.detectDoctype();if(doctype==null)
{return true;}
else
{if(doctype.version&&doctype.version=="4.0")
{return true}
return false;}}}}
var cg_wowdbsyndication=new Curse.WOWDB.Syndication();