(*
    This file is part of Dxbx - a XBox emulator written in Delphi (ported over from cxbx)
    Copyright (C) 2007 Shadow_tj and other members of the development team.

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
*)
unit uKernelThunk;

{$INCLUDE Dxbx.inc}

interface

uses
  // Delphi
  Types, // for DWord
  SysUtils, // for IntToStr
  // Dxbx
  uTypes,
  uEmuKrnl,
  uEmuKrnlAv,
  uEmuKrnlDbg,
  uEmuKrnlEx,
  uEmuKrnlFs,
  uEmuKrnlHal,
  uEmuKrnlIo,
  uEmuKrnlKd,
  uEmuKrnlKe,
  uEmuKrnlMm,
  uEmuKrnlNt,
  uEmuKrnlOb,
  uEmuKrnlPs,
  uEmuKrnlRtl,
  uEmuKrnlXbox,
  uEmuKrnlXc,
  uEmuKrnlXe;

function CxbxKrnl_KernelThunkTable: PKernelThunkTable; cdecl;

implementation

var
  KernelThunkTable: packed array[0..NUMBER_OF_THUNKS - 1] of Pointer = (
    @xboxkrnl_UnknownAPI000,
    @xboxkrnl_AvGetSavedDataAddress,
    @xboxkrnl_AvSendTVEncoderOption,
    @xboxkrnl_AvSetDisplayMode,
    @xboxkrnl_AvSetSavedDataAddress,
    @xboxkrnl_DbgBreakPoint,
    @xboxkrnl_DbgBreakPointWithStatus,
    @xboxkrnl_DbgLoadImageSymbols,
    @xboxkrnl_DbgPrint,
    @xboxkrnl_HalReadSMCTrayState,
    @xboxkrnl_DbgPrompt,
    @xboxkrnl_DbgUnLoadImageSymbols,
    @xboxkrnl_ExAcquireReadWriteLockExclusive,
    @xboxkrnl_ExAcquireReadWriteLockShared,
    @xboxkrnl_ExAllocatePool,
    @xboxkrnl_ExAllocatePoolWithTag,
    @xboxkrnl_ExEventObjectType,
    @xboxkrnl_ExFreePool,
    @xboxkrnl_ExInitializeReadWriteLock,
    @xboxkrnl_ExInterlockedAddLargeInteger,
    @xboxkrnl_ExInterlockedAddLargeStatistic,
    @xboxkrnl_ExInterlockedCompareExchange64,
    @xboxkrnl_ExMutantObjectType,
    @xboxkrnl_ExQueryPoolBlockSize,
    @xboxkrnl_ExQueryNonVolatileSetting,
    @xboxkrnl_ExReadWriteRefurbInfo,
    @xboxkrnl_ExRaiseException,
    @xboxkrnl_ExRaiseStatus,
    @xboxkrnl_ExReleaseReadWriteLock,
    @xboxkrnl_ExSaveNonVolatileSetting,
    @xboxkrnl_ExSemaphoreObjectType,
    @xboxkrnl_ExTimerObjectType,
    @xboxkrnl_ExfInterlockedInsertHeadList,
    @xboxkrnl_ExfInterlockedInsertTailList,
    @xboxkrnl_ExfInterlockedRemoveHeadList,
    @xboxkrnl_FscGetCacheSize,
    @xboxkrnl_FscInvalidateIdleBlocks,
    @xboxkrnl_FscSetCacheSize,
    @xboxkrnl_HalClearSoftwareInterrupt,
    @xboxkrnl_HalDisableSystemInterrupt,
    @xboxkrnl_HalDiskCachePartitionCount,
    @xboxkrnl_HalDiskModelNumber,
    @xboxkrnl_HalDiskSerialNumber,
    @xboxkrnl_HalEnableSystemInterrupt,
    @xboxkrnl_HalGetInterruptVector,
    @xboxkrnl_HalReadSMBusValue,
    @xboxkrnl_HalReadWritePCISpace,
    @xboxkrnl_HalRegisterShutdownNotification,
    @xboxkrnl_HalRequestSoftwareInterrupt,
    @xboxkrnl_HalReturnToFirmware,
    @xboxkrnl_HalWriteSMBusValue,
    @xboxkrnl_InterlockedCompareExchange,
    @xboxkrnl_InterlockedDecrement,
    @xboxkrnl_InterlockedIncrement,
    @xboxkrnl_InterlockedExchange,
    @xboxkrnl_InterlockedExchangeAdd,
    @xboxkrnl_InterlockedFlushSList,
    @xboxkrnl_InterlockedPopEntrySList,
    @xboxkrnl_InterlockedPushEntrySList,
    @xboxkrnl_IoAllocateIrp,
    @xboxkrnl_IoBuildAsynchronousFsdRequest,
    @xboxkrnl_IoBuildDeviceIoControlRequest,
    @xboxkrnl_IoBuildSynchronousFsdRequest,
    @xboxkrnl_IoCheckShareAccess,
    @xboxkrnl_IoCompletionObjectType,
    @xboxkrnl_IoCreateDevice,
    @xboxkrnl_IoCreateFile,
    @xboxkrnl_IoCreateSymbolicLink,
    @xboxkrnl_IoDeleteDevice,
    @xboxkrnl_IoDeleteSymbolicLink,
    @xboxkrnl_IoDeviceObjectType,
    @xboxkrnl_IoFileObjectType,
    @xboxkrnl_IoFreeIrp,
    @xboxkrnl_IoInitializeIrp,
    @xboxkrnl_IoInvalidDeviceRequest,
    @xboxkrnl_IoQueryFileInformation,
    @xboxkrnl_IoQueryVolumeInformation,
    @xboxkrnl_IoQueueThreadIrp,
    @xboxkrnl_IoRemoveShareAccess,
    @xboxkrnl_IoSetIoCompletion,
    @xboxkrnl_IoSetShareAccess,
    @xboxkrnl_IoStartNextPacket,
    @xboxkrnl_IoStartNextPacketByKey,
    @xboxkrnl_IoStartPacket,
    @xboxkrnl_IoSynchronousDeviceIoControlRequest,
    @xboxkrnl_IoSynchronousFsdRequest,
    @xboxkrnl_IofCallDriver,
    @xboxkrnl_IofCompleteRequest,
    @xboxkrnl_KdDebuggerEnabled,
    @xboxkrnl_KdDebuggerNotPresent,
    @xboxkrnl_IoDismountVolume,
    @xboxkrnl_IoDismountVolumeByName,
    @xboxkrnl_KeAlertResumeThread,
    @xboxkrnl_KeAlertThread,
    @xboxkrnl_KeBoostPriorityThread,
    @xboxkrnl_KeBugCheck,
    @xboxkrnl_KeBugCheckEx,
    @xboxkrnl_KeCancelTimer,
    @xboxkrnl_KeConnectInterrupt,
    @xboxkrnl_KeDelayExecutionThread,
    @xboxkrnl_KeDisconnectInterrupt,
    @xboxkrnl_KeEnterCriticalRegion,
    @xboxkrnl_MmGlobalData,
    @xboxkrnl_KeGetCurrentIrql,
    @xboxkrnl_KeGetCurrentThread,
    @xboxkrnl_KeInitializeApc,
    @xboxkrnl_KeInitializeDeviceQueue,
    @xboxkrnl_KeInitializeDpc,
    @xboxkrnl_KeInitializeEvent,
    @xboxkrnl_KeInitializeInterrupt,
    @xboxkrnl_KeInitializeMutant,
    @xboxkrnl_KeInitializeQueue,
    @xboxkrnl_KeInitializeSemaphore,
    @xboxkrnl_KeInitializeTimerEx,
    @xboxkrnl_KeInsertByKeyDeviceQueue,
    @xboxkrnl_KeInsertDeviceQueue,
    @xboxkrnl_KeInsertHeadQueue,
    @xboxkrnl_KeInsertQueue,
    @xboxkrnl_KeInsertQueueApc,
    @xboxkrnl_KeInsertQueueDpc,
    @xboxkrnl_KeInterruptTime,
    @xboxkrnl_KeIsExecutingDpc,
    @xboxkrnl_KeLeaveCriticalRegion,
    @xboxkrnl_KePulseEvent,
    @xboxkrnl_KeQueryBasePriorityThread,
    @xboxkrnl_KeQueryInterruptTime,
    @xboxkrnl_KeQueryPerformanceCounter,
    @xboxkrnl_KeQueryPerformanceFrequency,
    @xboxkrnl_KeQuerySystemTime,
    @xboxkrnl_KeRaiseIrqlToDpcLevel,
    @xboxkrnl_KeRaiseIrqlToSynchLevel,
    @xboxkrnl_KeReleaseMutant,
    @xboxkrnl_KeReleaseSemaphore,
    @xboxkrnl_KeRemoveByKeyDeviceQueue,
    @xboxkrnl_KeRemoveDeviceQueue,
    @xboxkrnl_KeRemoveEntryDeviceQueue,
    @xboxkrnl_KeRemoveQueue,
    @xboxkrnl_KeRemoveQueueDpc,
    @xboxkrnl_KeResetEvent,
    @xboxkrnl_KeRestoreFloatingPointState,
    @xboxkrnl_KeResumeThread,
    @xboxkrnl_KeRundownQueue,
    @xboxkrnl_KeSaveFloatingPointState,
    @xboxkrnl_KeSetBasePriorityThread,
    @xboxkrnl_KeSetDisableBoostThread,
    @xboxkrnl_KeSetEvent,
    @xboxkrnl_KeSetEventBoostPriority,
    @xboxkrnl_KeSetPriorityProcess,
    @xboxkrnl_KeSetPriorityThread,
    @xboxkrnl_KeSetTimer,
    @xboxkrnl_KeSetTimerEx,
    @xboxkrnl_KeStallExecutionProcessor,
    @xboxkrnl_KeSuspendThread,
    @xboxkrnl_KeSynchronizeExecution,
    @xboxkrnl_KeSystemTime,
    @xboxkrnl_KeTestAlertThread,
    @xboxkrnl_KeTickCount,
    @xboxkrnl_KeTimeIncrement,
    @xboxkrnl_KeWaitForMultipleObjects,
    @xboxkrnl_KeWaitForSingleObject,
    @xboxkrnl_KfRaiseIrql,
    @xboxkrnl_KfLowerIrql,
    @xboxkrnl_KiBugCheckData,
    @xboxkrnl_KiUnlockDispatcherDatabase,
    @xboxkrnl_LaunchDataPage,
    @xboxkrnl_MmAllocateContiguousMemory,
    @xboxkrnl_MmAllocateContiguousMemoryEx,
    @xboxkrnl_MmAllocateSystemMemory,
    @xboxkrnl_MmClaimGpuInstanceMemory,
    @xboxkrnl_MmCreateKernelStack,
    @xboxkrnl_MmDeleteKernelStack,
    @xboxkrnl_MmFreeContiguousMemory,
    @xboxkrnl_MmFreeSystemMemory,
    @xboxkrnl_MmGetPhysicalAddress,
    @xboxkrnl_MmIsAddressValid,
    @xboxkrnl_MmLockUnlockBufferPages,
    @xboxkrnl_MmLockUnlockPhysicalPage,
    @xboxkrnl_MmMapIoSpace,
    @xboxkrnl_MmPersistContiguousMemory,
    @xboxkrnl_MmQueryAddressProtect,
    @xboxkrnl_MmQueryAllocationSize,
    @xboxkrnl_MmQueryStatistics,
    @xboxkrnl_MmSetAddressProtect,
    @xboxkrnl_MmUnmapIoSpace,
    @xboxkrnl_NtAllocateVirtualMemory,
    @xboxkrnl_NtCancelTimer,
    @xboxkrnl_NtClearEvent,
    @xboxkrnl_NtClose,
    @xboxkrnl_NtCreateDirectoryObject,
    @xboxkrnl_NtCreateEvent,
    @xboxkrnl_NtCreateFile,
    @xboxkrnl_NtCreateIoCompletion,
    @xboxkrnl_NtCreateMutant,
    @xboxkrnl_NtCreateSemaphore,
    @xboxkrnl_NtCreateTimer,
    @xboxkrnl_NtDeleteFile,
    @xboxkrnl_NtDeviceIoControlFile,
    @xboxkrnl_NtDuplicateObject,
    @xboxkrnl_NtFlushBuffersFile,
    @xboxkrnl_NtFreeVirtualMemory,
    @xboxkrnl_NtFsControlFile,
    @xboxkrnl_NtOpenDirectoryObject,
    @xboxkrnl_NtOpenFile,
    @xboxkrnl_NtOpenSymbolicLinkObject,
    @xboxkrnl_NtProtectVirtualMemory,
    @xboxkrnl_NtPulseEvent,
    @xboxkrnl_NtQueueApcThread,
    @xboxkrnl_NtQueryDirectoryFile,
    @xboxkrnl_NtQueryDirectoryObject,
    @xboxkrnl_NtQueryEvent,
    @xboxkrnl_NtQueryFullAttributesFile,
    @xboxkrnl_NtQueryInformationFile,
    @xboxkrnl_NtQueryIoCompletion,
    @xboxkrnl_NtQueryMutant,
    @xboxkrnl_NtQuerySemaphore,
    @xboxkrnl_NtQuerySymbolicLinkObject,
    @xboxkrnl_NtQueryTimer,
    @xboxkrnl_NtQueryVirtualMemory,
    @xboxkrnl_NtQueryVolumeInformationFile,
    @xboxkrnl_NtReadFile,
    @xboxkrnl_NtReadFileScatter,
    @xboxkrnl_NtReleaseMutant,
    @xboxkrnl_NtReleaseSemaphore,
    @xboxkrnl_NtRemoveIoCompletion,
    @xboxkrnl_NtResumeThread,
    @xboxkrnl_NtSetEvent,
    @xboxkrnl_NtSetInformationFile,
    @xboxkrnl_NtSetIoCompletion,
    @xboxkrnl_NtSetSystemTime,
    @xboxkrnl_NtSetTimerEx,
    @xboxkrnl_NtSignalAndWaitForSingleObjectEx,
    @xboxkrnl_NtSuspendThread,
    @xboxkrnl_NtUserIoApcDispatcher,
    @xboxkrnl_NtWaitForSingleObject,
    @xboxkrnl_NtWaitForSingleObjectEx,
    @xboxkrnl_NtWaitForMultipleObjectsEx,
    @xboxkrnl_NtWriteFile,
    @xboxkrnl_NtWriteFileGather,
    @xboxkrnl_NtYieldExecution,
    @xboxkrnl_ObCreateObject,
    @xboxkrnl_ObDirectoryObjectType,
    @xboxkrnl_ObInsertObject,
    @xboxkrnl_ObMakeTemporaryObject,
    @xboxkrnl_ObOpenObjectByName,
    @xboxkrnl_ObOpenObjectByPointer,
    @xboxkrnl_ObpObjectHandleTable,
    @xboxkrnl_ObReferenceObjectByHandle,
    @xboxkrnl_ObReferenceObjectByName,
    @xboxkrnl_ObReferenceObjectByPointer,
    @xboxkrnl_ObSymbolicLinkObjectType,
    @xboxkrnl_ObfDereferenceObject,
    @xboxkrnl_ObfReferenceObject,
    @xboxkrnl_PhyGetLinkState,
    @xboxkrnl_PhyInitialize,
    @xboxkrnl_PsCreateSystemThread,
    @xboxkrnl_PsCreateSystemThreadEx,
    @xboxkrnl_PsQueryStatistics,
    @xboxkrnl_PsSetCreateThreadNotifyRoutine,
    @xboxkrnl_PsTerminateSystemThread,
    @xboxkrnl_PsThreadObjectType,
    @xboxkrnl_RtlAnsiStringToUnicodeString,
    @xboxkrnl_RtlAppendStringToString,
    @xboxkrnl_RtlAppendUnicodeStringToString,
    @xboxkrnl_RtlAppendUnicodeToString,
    @xboxkrnl_RtlAssert,
    @xboxkrnl_RtlCaptureContext,
    @xboxkrnl_RtlCaptureStackBackTrace,
    @xboxkrnl_RtlCharToInteger,
    @xboxkrnl_RtlCompareMemory,
    @xboxkrnl_RtlCompareMemoryUlong,
    @xboxkrnl_RtlCompareString,
    @xboxkrnl_RtlCompareUnicodeString,
    @xboxkrnl_RtlCopyString,
    @xboxkrnl_RtlCopyUnicodeString,
    @xboxkrnl_RtlCreateUnicodeString,
    @xboxkrnl_RtlDowncaseUnicodeChar,
    @xboxkrnl_RtlDowncaseUnicodeString,
    @xboxkrnl_RtlEnterCriticalSection,
    @xboxkrnl_RtlEnterCriticalSectionAndRegion,
    @xboxkrnl_RtlEqualString,
    @xboxkrnl_RtlEqualUnicodeString,
    @xboxkrnl_RtlExtendedIntegerMultiply,
    @xboxkrnl_RtlExtendedLargeIntegerDivide,
    @xboxkrnl_RtlExtendedMagicDivide,
    @xboxkrnl_RtlFillMemory,
    @xboxkrnl_RtlFillMemoryUlong,
    @xboxkrnl_RtlFreeAnsiString,
    @xboxkrnl_RtlFreeUnicodeString,
    @xboxkrnl_RtlGetCallersAddress,
    @xboxkrnl_RtlInitAnsiString,
    @xboxkrnl_RtlInitUnicodeString,
    @xboxkrnl_RtlInitializeCriticalSection,
    @xboxkrnl_RtlIntegerToChar,
    @xboxkrnl_RtlIntegerToUnicodeString,
    @xboxkrnl_RtlLeaveCriticalSection,
    @xboxkrnl_RtlLeaveCriticalSectionAndRegion,
    @xboxkrnl_RtlLowerChar,
    @xboxkrnl_RtlMapGenericMask,
    @xboxkrnl_RtlMoveMemory,
    @xboxkrnl_RtlMultiByteToUnicodeN,
    @xboxkrnl_RtlMultiByteToUnicodeSize,
    @xboxkrnl_RtlNtStatusToDosError,
    @xboxkrnl_RtlRaiseException,
    @xboxkrnl_RtlRaiseStatus,
    @xboxkrnl_RtlTimeFieldsToTime,
    @xboxkrnl_RtlTimeToTimeFields,
    @xboxkrnl_RtlTryEnterCriticalSection,
    @xboxkrnl_RtlUlongByteSwap,
    @xboxkrnl_RtlUnicodeStringToAnsiString,
    @xboxkrnl_RtlUnicodeStringToInteger,
    @xboxkrnl_RtlUnicodeToMultiByteN,
    @xboxkrnl_RtlUnicodeToMultiByteSize,
    @xboxkrnl_RtlUnwind,
    @xboxkrnl_RtlUpcaseUnicodeChar,
    @xboxkrnl_RtlUpcaseUnicodeString,
    @xboxkrnl_RtlUpcaseUnicodeToMultiByteN,
    @xboxkrnl_RtlUpperChar,
    @xboxkrnl_RtlUpperString,
    @xboxkrnl_RtlUshortByteSwap,
    @xboxkrnl_RtlWalkFrameChain,
    @xboxkrnl_RtlZeroMemory,
    @xboxkrnl_XboxEEPROMKey,
    @xboxkrnl_XboxHardwareInfo,
    @xboxkrnl_XboxHDKey,
    @xboxkrnl_XboxKrnlVersion,
    @xboxkrnl_XboxSignatureKey,
    @xboxkrnl_XeImageFileName,
    @xboxkrnl_XeLoadSection,
    @xboxkrnl_XeUnloadSection,
    @xboxkrnl_READ_PORT_BUFFER_UCHAR,
    @xboxkrnl_READ_PORT_BUFFER_USHORT,
    @xboxkrnl_READ_PORT_BUFFER_ULONG,
    @xboxkrnl_WRITE_PORT_BUFFER_UCHAR,
    @xboxkrnl_WRITE_PORT_BUFFER_USHORT,
    @xboxkrnl_WRITE_PORT_BUFFER_ULONG,
    @xboxkrnl_XcSHAInit,
    @xboxkrnl_XcSHAUpdate,
    @xboxkrnl_XcSHAFinal,
    @xboxkrnl_XcRC4Key,
    @xboxkrnl_XcRC4Crypt,
    @xboxkrnl_XcHMAC,
    @xboxkrnl_XcPKEncPublic,
    @xboxkrnl_XcPKDecPrivate,
    @xboxkrnl_XcPKGetKeyLen,
    @xboxkrnl_XcVerifyPKCS1Signature,
    @xboxkrnl_XcModExp,
    @xboxkrnl_XcDESKeyParity,
    @xboxkrnl_XcKeyTable,
    @xboxkrnl_XcBlockCrypt,
    @xboxkrnl_XcBlockCryptCBC,
    @xboxkrnl_XcCryptService,
    @xboxkrnl_XcUpdateCrypto,
    @xboxkrnl_RtlRip,
    @xboxkrnl_XboxLANKey,
    @xboxkrnl_XboxAlternateSignatureKeys,
    @xboxkrnl_XePublicKeyData,
    @xboxkrnl_HalBootSMCVideoMode,
    @xboxkrnl_IdexChannelObject,
    @xboxkrnl_HalIsResetOrShutdownPending,
    @xboxkrnl_IoMarkIrpMustComplete,
    @xboxkrnl_HalInitiateShutdown,
    @xboxkrnl_RtlSnprintf,
    @xboxkrnl_RtlSprintf,
    @xboxkrnl_RtlVsnprintf,
    @xboxkrnl_RtlVsprintf,
    @xboxkrnl_HalEnableSecureTrayEject,
    @xboxkrnl_HalWriteSMCScratchRegister,
    @xboxkrnl_UnknownAPI367,
    @xboxkrnl_UnknownAPI368,
    @xboxkrnl_UnknownAPI369,
    @xboxkrnl_UnknownAPI370,
    @xboxkrnl_UnknownAPI371,
    @xboxkrnl_UnknownAPI372,
    @xboxkrnl_UnknownAPI373,
    @xboxkrnl_MmDbgAllocateMemory,
    @xboxkrnl_MmDbgFreeMemory,
    @xboxkrnl_MmDbgQueryAvailablePages,
    @xboxkrnl_MmDbgReleaseAddress,
    @xboxkrnl_MmDbgWriteCheck
  );

function CxbxKrnl_KernelThunkTable: PKernelThunkTable;
begin
  Result := @KernelThunkTable;
end;

end.
